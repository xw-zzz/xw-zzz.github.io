import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as e,b as n}from"./app-ef0b4d9d.js";const c={},i=n(`<ul><li><p>在配置文件添加配置，配置文件路径 <code>/usr/share/elasticsearch/config/elasticsearch.yml</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>xpack.security.enabled: <span class="token boolean">true</span>
xpack.license.self_generated.type: basic
xpack.security.transport.ssl.enabled: <span class="token boolean">true</span>
xpack.security.transport.ssl.verification_mode: certificate
xpack.security.transport.ssl.keystore.path: elastic-certificates.p12
xpack.security.transport.ssl.truststore.path: elastic-certificates.p12
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>生成证书</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># cd到elasticsearch目录下的bin目录执行</span>
./elasticsearch-certutil cert <span class="token parameter variable">-out</span> config/elastic-certificates.p12 <span class="token parameter variable">-pass</span> <span class="token string">&quot;&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>并将证书放到<code>/usr/share/elasticsearch/config/elastic-certificates.p12</code></p></li><li><p>初始化，设置密码</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span>  cmp-elasticsearch <span class="token function">bash</span>
 <span class="token builtin class-name">cd</span> bin
 ./elasticsearch-setup-passwords interactive
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><p>以docker为例：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> cmp-elasticsearch /usr/share/elasticsearch/bin/elasticsearch-users <span class="token function">useradd</span> admin <span class="token parameter variable">-p</span> admin123 <span class="token parameter variable">-r</span> superuser<span class="token punctuation">;</span>
<span class="token function">curl</span> <span class="token parameter variable">-u</span> admin:admin123 <span class="token parameter variable">-XPUT</span> <span class="token string">&quot;http://localhost:9200/_xpack/security/user/elastic/_password?pretty&quot;</span> <span class="token parameter variable">-H</span> <span class="token string">&#39;Content-Type: application/json&#39;</span> <span class="token parameter variable">-d</span>  <span class="token string">&#39;{&quot;password&quot;:&quot;passwprd&quot;}&#39;</span><span class="token punctuation">;</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> cmp-elasticsearch /usr/share/elasticsearch/bin/elasticsearch-users <span class="token function">userdel</span> admin<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul>`,1),t=[i];function l(r,p){return a(),e("div",null,t)}const u=s(c,[["render",l],["__file","10.Elasticsearch安全认证.html.vue"]]);export{u as default};
