import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{r as u,o as a,c as i,a as n,e as t,d as e,b as l}from"./app-ef0b4d9d.js";const r="/assets/1634888058376-f46f9aee-d21f-4936-a1ba-2b5b4180e2de-1bee7092.png",c="/assets/1634888105856-93a0c92a-fcac-4faf-abb6-a216817f2da1-628e7837.png",d="/assets/20220905140814-fab109f3.png",q="/assets/1634888614160-25786421-1e90-48f6-9825-422a8e11846b-d9f5b8ba.png",p="/assets/20220905141004-88472fcf.png",m={},_=l('<h2 id="添加agent" tabindex="-1"><a class="header-anchor" href="#添加agent" aria-hidden="true">#</a> 添加Agent</h2><ul><li>创建项目集群</li></ul><p><img src="'+r+'" alt="image.png" loading="lazy"></p><ul><li>进入到选择集群的类型，这里选择自定义就可以</li></ul><p><img src="'+c+'" alt="image.png" loading="lazy"></p><ul><li>进入到添加集群-Custom页面</li></ul><p>​ <img src="'+d+'" alt="" loading="lazy"></p><ul><li>点击下一步</li></ul><p><img src="'+q+`" alt="image.png" loading="lazy"></p><ul><li><p>添加Linux主机节点</p><ul><li><p>需要安装Docker,命令如下</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>  # 1.先安装yml
  yum install -y yum-utils device-mapper-persistent-data lvm2
  
  # 2.设置阿里云镜像
  sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
  
  #3. 安装docker
  yum -y install docker-ce-20.10.10-3.el7
  
  #4. 查看docker版本
  docker -v
  
  #5. 启动docker
  systemctl start docker
  
  #6. 查看docker 启动状态
  systemctl status docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>终端中运行复制下来的命令</p></li><li><p>稍等一会儿，可查看添加的集群状态</p><p><img src="`+p+`" alt="" loading="lazy"></p></li></ul><h2 id="常见应用部署" tabindex="-1"><a class="header-anchor" href="#常见应用部署" aria-hidden="true">#</a> 常见应用部署</h2><h3 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> Mysql</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>镜像：mysql:8.0
环境变量：
MYSQL_ROOT_PASSWORD=123456

路径映射
/home/data/mysql/data
/var/lib/mysql:rw
/etc/localtime
/etc/localtime:ro

在创建 Docker 容器时，加上 “-v /etc/localtime:/etc/localtime:ro” 参数
让容器使用宿主机的时间，容器时间与宿主机时间同步,:ro 指定该 volume 为只读
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://tuchuang-1254256192.cos.ap-nanjing.myqcloud.com/typora/20220905141337.png" alt="" loading="lazy"></p><img src="https://tuchuang-1254256192.cos.ap-nanjing.myqcloud.com/typora/20220905141354.png" style="zoom:67%;"><p><img src="https://tuchuang-1254256192.cos.ap-nanjing.myqcloud.com/typora/20220905141422.png" alt="" loading="lazy"></p><h3 id="nacos" tabindex="-1"><a class="header-anchor" href="#nacos" aria-hidden="true">#</a> Nacos</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>镜像：nacos/nacos-server:2.0.2
端口：8848：8848

环境变量：
JVM_XMN=128m
JVM_XMS=128m
JVM_XMX=128m
MODE=standalone
MYSQL_SERVICE_DB_NAME=nacos_config
MYSQL_SERVICE_DB_PARAM=characterEncoding=utf8&amp;connectTimeout=10000&amp;socketTimeout=30000&amp;autoReconnect=true&amp;useSSL=false
MYSQL_SERVICE_HOST=112.74.107.230
MYSQL_SERVICE_PASSWORD=xdclass.net168
MYSQL_SERVICE_PORT=3306
MYSQL_SERVICE_USER=root
NACOS_AUTH_ENABLE=true
SPRING_DATASOURCE_PLATFORM=mysql

挂载目录：
宿主机：/home/data/nacos/logs  容器：/home/nacos/logs

-Xms:初始堆大小
-Xmx:最大堆大小
-Xmn:新生代大小
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="xxl-job" tabindex="-1"><a class="header-anchor" href="#xxl-job" aria-hidden="true">#</a> xxl-job</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>镜像：xuxueli/xxl-job-admin:2.2.0
端口：8080：8080
环境变量：
PARAMS=--spring.datasource.url=jdbc:mysql://118.195.246.204:30006/xxl_job?Unicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai \\
--spring.datasource.username=root \\
--spring.datasource.password=123456 \\
--xxl.job.accessToken=xdclass.net
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> Redis</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>镜像：redis:6.2.4
端口：6379：6379

数据卷：
/mydata/redis/data
/data

入口命令
redis-server --requirepass 123456
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://tuchuang-1254256192.cos.ap-nanjing.myqcloud.com/typora/20220905143202.png" alt="" loading="lazy"></p><p><img src="https://tuchuang-1254256192.cos.ap-nanjing.myqcloud.com/typora/20220905143238.png" alt="" loading="lazy"></p><h3 id="clickhouse" tabindex="-1"><a class="header-anchor" href="#clickhouse" aria-hidden="true">#</a> ClickHouse</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>镜像：clickhouse/clickhouse-server:22.1.4.30
端口：8123:8123 9000:9000 9009:9009

## 环境变量
nofile=262144
privileged=true
ulimit=262144


1.log卷
clickhouse-log
/mydata/docker/clickhouse/log
/var/log/clickhouse-server

2.data卷
clickhouse-data
/mydata/docker/clickhouse/data
/var/lib/clickhouse
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="zookeeper" tabindex="-1"><a class="header-anchor" href="#zookeeper" aria-hidden="true">#</a> Zookeeper</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>镜像：wurstmeister/zookeeper
端口：2181：2181
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="kafka" tabindex="-1"><a class="header-anchor" href="#kafka" aria-hidden="true">#</a> Kafka</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>镜像：wurstmeister/kafka:2.13-2.7.0
端口：9092：9092

环境变量：
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://120.25.217.15:9092
KAFKA_BROKER_ID=0
KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092
KAFKA_ZOOKEEPER_CONNECT=172.31.101.8:2181
KAFKA_PORT=9092
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="elasticsearch7-x" tabindex="-1"><a class="header-anchor" href="#elasticsearch7-x" aria-hidden="true">#</a> ElasticSearch7.x</h3><ul><li><p>在rancher主界面-&gt;资源-&gt;映射配置</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>elasticsearch.yml

cluster.name: &quot;docker-cluster&quot;
network.host: 0.0.0.0
## 开启认证
xpack.security.enabled: true
xpack.license.self_generated.type: basic
xpack.security.transport.ssl.enabled: true

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>导入yaml</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">deployment.kubernetes.io/revision</span><span class="token punctuation">:</span> <span class="token string">&quot;2&quot;</span>
    <span class="token key atrule">field.cattle.io/creatorId</span><span class="token punctuation">:</span> user<span class="token punctuation">-</span>z8b4c
    <span class="token key atrule">field.cattle.io/publicEndpoints</span><span class="token punctuation">:</span> <span class="token string">&#39;[{&quot;addresses&quot;:[&quot;172.18.123.236&quot;],&quot;port&quot;:9200,&quot;protocol&quot;:&quot;TCP&quot;,&quot;serviceName&quot;:&quot;default:es7-nodeport&quot;,&quot;allNodes&quot;:true},{&quot;addresses&quot;:[&quot;172.18.123.236&quot;],&quot;port&quot;:9300,&quot;protocol&quot;:&quot;TCP&quot;,&quot;serviceName&quot;:&quot;default:es7-nodeport&quot;,&quot;allNodes&quot;:true}]&#39;</span>
    <span class="token key atrule">kubectl.kubernetes.io/last-applied-configuration</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
      {&quot;apiVersion&quot;:&quot;apps/v1&quot;,&quot;kind&quot;:&quot;Deployment&quot;,&quot;metadata&quot;:{&quot;annotations&quot;:{&quot;deployment.kubernetes.io/revision&quot;:&quot;1&quot;,&quot;field.cattle.io/creatorId&quot;:&quot;user-z8b4c&quot;,&quot;field.cattle.io/publicEndpoints&quot;:&quot;[{\\&quot;addresses\\&quot;:[\\&quot;172.18.123.236\\&quot;],\\&quot;port\\&quot;:9200,\\&quot;protocol\\&quot;:\\&quot;TCP\\&quot;,\\&quot;serviceName\\&quot;:\\&quot;default:es7-nodeport\\&quot;,\\&quot;allNodes\\&quot;:true},{\\&quot;addresses\\&quot;:[\\&quot;172.18.123.236\\&quot;],\\&quot;port\\&quot;:9300,\\&quot;protocol\\&quot;:\\&quot;TCP\\&quot;,\\&quot;serviceName\\&quot;:\\&quot;default:es7-nodeport\\&quot;,\\&quot;allNodes\\&quot;:true}]&quot;},&quot;creationTimestamp&quot;:null,&quot;generation&quot;:1,&quot;labels&quot;:{&quot;cattle.io/creator&quot;:&quot;norman&quot;,&quot;workload.user.cattle.io/workloadselector&quot;:&quot;deployment-default-es7&quot;},&quot;managedFields&quot;:[{&quot;apiVersion&quot;:&quot;apps/v1&quot;,&quot;fieldsType&quot;:&quot;FieldsV1&quot;,&quot;fieldsV1&quot;:{&quot;f:metadata&quot;:{&quot;f:annotations&quot;:{&quot;.&quot;:{},&quot;f:field.cattle.io/creatorId&quot;:{},&quot;f:field.cattle.io/publicEndpoints&quot;:{},&quot;f:kubectl.kubernetes.io/last-applied-configuration&quot;:{}},&quot;f:labels&quot;:{&quot;.&quot;:{},&quot;f:cattle.io/creator&quot;:{},&quot;f:workload.user.cattle.io/workloadselector&quot;:{}}},&quot;f:spec&quot;:{&quot;f:progressDeadlineSeconds&quot;:{},&quot;f:replicas&quot;:{},&quot;f:revisionHistoryLimit&quot;:{},&quot;f:selector&quot;:{},&quot;f:strategy&quot;:{&quot;f:rollingUpdate&quot;:{&quot;.&quot;:{},&quot;f:maxSurge&quot;:{},&quot;f:maxUnavailable&quot;:{}},&quot;f:type&quot;:{}},&quot;f:template&quot;:{&quot;f:metadata&quot;:{&quot;f:annotations&quot;:{&quot;.&quot;:{},&quot;f:cattle.io/timestamp&quot;:{},&quot;f:field.cattle.io/ports&quot;:{},&quot;f:workload.cattle.io/state&quot;:{}},&quot;f:labels&quot;:{&quot;.&quot;:{},&quot;f:workload.user.cattle.io/workloadselector&quot;:{}}},&quot;f:spec&quot;:{&quot;f:containers&quot;:{&quot;k:{\\&quot;name\\&quot;:\\&quot;es7\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:env&quot;:{&quot;.&quot;:{},&quot;k:{\\&quot;name\\&quot;:\\&quot;ES_JAVA_OPTS\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:name&quot;:{},&quot;f:value&quot;:{}},&quot;k:{\\&quot;name\\&quot;:\\&quot;discovery.type\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:name&quot;:{},&quot;f:value&quot;:{}}},&quot;f:image&quot;:{},&quot;f:imagePullPolicy&quot;:{},&quot;f:name&quot;:{},&quot;f:ports&quot;:{&quot;.&quot;:{},&quot;k:{\\&quot;containerPort\\&quot;:9200,\\&quot;protocol\\&quot;:\\&quot;TCP\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:containerPort&quot;:{},&quot;f:name&quot;:{},&quot;f:protocol&quot;:{}},&quot;k:{\\&quot;containerPort\\&quot;:9300,\\&quot;protocol\\&quot;:\\&quot;TCP\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:containerPort&quot;:{},&quot;f:name&quot;:{},&quot;f:protocol&quot;:{}}},&quot;f:resources&quot;:{},&quot;f:securityContext&quot;:{&quot;.&quot;:{},&quot;f:allowPrivilegeEscalation&quot;:{},&quot;f:capabilities&quot;:{},&quot;f:privileged&quot;:{},&quot;f:readOnlyRootFilesystem&quot;:{},&quot;f:runAsNonRoot&quot;:{}},&quot;f:stdin&quot;:{},&quot;f:terminationMessagePath&quot;:{},&quot;f:terminationMessagePolicy&quot;:{},&quot;f:tty&quot;:{},&quot;f:volumeMounts&quot;:{&quot;.&quot;:{},&quot;k:{\\&quot;mountPath\\&quot;:\\&quot;/usr/share/elasticsearch/config/elasticsearch.yml\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:mountPath&quot;:{},&quot;f:name&quot;:{},&quot;f:subPath&quot;:{}},&quot;k:{\\&quot;mountPath\\&quot;:\\&quot;/usr/share/elasticsearch/data\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:mountPath&quot;:{},&quot;f:name&quot;:{}},&quot;k:{\\&quot;mountPath\\&quot;:\\&quot;/usr/share/elasticsearch/plugins\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:mountPath&quot;:{},&quot;f:name&quot;:{}}}}},&quot;f:dnsPolicy&quot;:{},&quot;f:nodeName&quot;:{},&quot;f:restartPolicy&quot;:{},&quot;f:schedulerName&quot;:{},&quot;f:securityContext&quot;:{},&quot;f:terminationGracePeriodSeconds&quot;:{},&quot;f:volumes&quot;:{&quot;.&quot;:{},&quot;k:{\\&quot;name\\&quot;:\\&quot;es-data\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:hostPath&quot;:{&quot;.&quot;:{},&quot;f:path&quot;:{},&quot;f:type&quot;:{}},&quot;f:name&quot;:{}},&quot;k:{\\&quot;name\\&quot;:\\&quot;es-plugins\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:hostPath&quot;:{&quot;.&quot;:{},&quot;f:path&quot;:{},&quot;f:type&quot;:{}},&quot;f:name&quot;:{}},&quot;k:{\\&quot;name\\&quot;:\\&quot;xd-es\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:configMap&quot;:{&quot;.&quot;:{},&quot;f:defaultMode&quot;:{},&quot;f:name&quot;:{},&quot;f:optional&quot;:{}},&quot;f:name&quot;:{}}}}}}},&quot;manager&quot;:&quot;kubectl-client-side-apply&quot;,&quot;operation&quot;:&quot;Update&quot;,&quot;time&quot;:&quot;2022-04-12T06:20:23Z&quot;},{&quot;apiVersion&quot;:&quot;apps/v1&quot;,&quot;fieldsType&quot;:&quot;FieldsV1&quot;,&quot;fieldsV1&quot;:{&quot;f:metadata&quot;:{&quot;f:annotations&quot;:{&quot;f:deployment.kubernetes.io/revision&quot;:{}}},&quot;f:status&quot;:{&quot;f:availableReplicas&quot;:{},&quot;f:conditions&quot;:{&quot;.&quot;:{},&quot;k:{\\&quot;type\\&quot;:\\&quot;Available\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:lastTransitionTime&quot;:{},&quot;f:lastUpdateTime&quot;:{},&quot;f:message&quot;:{},&quot;f:reason&quot;:{},&quot;f:status&quot;:{},&quot;f:type&quot;:{}},&quot;k:{\\&quot;type\\&quot;:\\&quot;Progressing\\&quot;}&quot;:{&quot;.&quot;:{},&quot;f:lastTransitionTime&quot;:{},&quot;f:lastUpdateTime&quot;:{},&quot;f:message&quot;:{},&quot;f:reason&quot;:{},&quot;f:status&quot;:{},&quot;f:type&quot;:{}}},&quot;f:observedGeneration&quot;:{},&quot;f:readyReplicas&quot;:{},&quot;f:replicas&quot;:{},&quot;f:updatedReplicas&quot;:{}}},&quot;manager&quot;:&quot;kube-controller-manager&quot;,&quot;operation&quot;:&quot;Update&quot;,&quot;time&quot;:&quot;2022-04-12T06:20:27Z&quot;}],&quot;name&quot;:&quot;es7&quot;,&quot;namespace&quot;:&quot;default&quot;},&quot;spec&quot;:{&quot;progressDeadlineSeconds&quot;:600,&quot;replicas&quot;:1,&quot;revisionHistoryLimit&quot;:10,&quot;selector&quot;:{&quot;matchLabels&quot;:{&quot;workload.user.cattle.io/workloadselector&quot;:&quot;deployment-default-es7&quot;}},&quot;strategy&quot;:{&quot;rollingUpdate&quot;:{&quot;maxSurge&quot;:1,&quot;maxUnavailable&quot;:0},&quot;type&quot;:&quot;RollingUpdate&quot;},&quot;template&quot;:{&quot;metadata&quot;:{&quot;annotations&quot;:{&quot;cattle.io/timestamp&quot;:&quot;2022-04-12T05:19:04Z&quot;,&quot;field.cattle.io/ports&quot;:&quot;[[{\\&quot;containerPort\\&quot;:9200,\\&quot;dnsName\\&quot;:\\&quot;es7-nodeport\\&quot;,\\&quot;hostPort\\&quot;:0,\\&quot;kind\\&quot;:\\&quot;NodePort\\&quot;,\\&quot;name\\&quot;:\\&quot;9200tcp92001\\&quot;,\\&quot;protocol\\&quot;:\\&quot;TCP\\&quot;,\\&quot;sourcePort\\&quot;:9200},{\\&quot;containerPort\\&quot;:9300,\\&quot;dnsName\\&quot;:\\&quot;es7-nodeport\\&quot;,\\&quot;hostPort\\&quot;:0,\\&quot;kind\\&quot;:\\&quot;NodePort\\&quot;,\\&quot;name\\&quot;:\\&quot;9300tcp93001\\&quot;,\\&quot;protocol\\&quot;:\\&quot;TCP\\&quot;,\\&quot;sourcePort\\&quot;:9300}]]&quot;,&quot;workload.cattle.io/state&quot;:&quot;{\\&quot;\\&quot;:\\&quot;c-fh95p:m-90a323cc4bdc\\&quot;,\\&quot;aXp3ejkwcGVndTlidWR4NXRrNHJ1eno=\\&quot;:\\&quot;c-fh95p:m-90a323cc4bdc\\&quot;,\\&quot;aXp3ejlmM3B2azRreDVoYW5yc2xxaHo=\\&quot;:\\&quot;c-9kkcj:m-173ea115b6eb\\&quot;}&quot;},&quot;creationTimestamp&quot;:null,&quot;labels&quot;:{&quot;workload.user.cattle.io/workloadselector&quot;:&quot;deployment-default-es7&quot;}},&quot;spec&quot;:{&quot;containers&quot;:[{&quot;env&quot;:[{&quot;name&quot;:&quot;ES_JAVA_OPTS&quot;,&quot;value&quot;:&quot;-Xms128m -Xmx128m&quot;},{&quot;name&quot;:&quot;discovery.type&quot;,&quot;value&quot;:&quot;single-node&quot;}],&quot;image&quot;:&quot;elasticsearch:7.6.2&quot;,&quot;imagePullPolicy&quot;:&quot;Always&quot;,&quot;name&quot;:&quot;es7&quot;,&quot;ports&quot;:[{&quot;containerPort&quot;:9200,&quot;name&quot;:&quot;9200tcp92001&quot;,&quot;protocol&quot;:&quot;TCP&quot;},{&quot;containerPort&quot;:9300,&quot;name&quot;:&quot;9300tcp93001&quot;,&quot;protocol&quot;:&quot;TCP&quot;}],&quot;resources&quot;:{},&quot;securityContext&quot;:{&quot;allowPrivilegeEscalation&quot;:false,&quot;capabilities&quot;:{},&quot;privileged&quot;:false,&quot;readOnlyRootFilesystem&quot;:false,&quot;runAsNonRoot&quot;:false},&quot;stdin&quot;:true,&quot;terminationMessagePath&quot;:&quot;/dev/termination-log&quot;,&quot;terminationMessagePolicy&quot;:&quot;File&quot;,&quot;tty&quot;:true,&quot;volumeMounts&quot;:[{&quot;mountPath&quot;:&quot;/usr/share/elasticsearch/config/elasticsearch.yml&quot;,&quot;name&quot;:&quot;xd-es&quot;,&quot;subPath&quot;:&quot;elasticsearch.yml&quot;},{&quot;mountPath&quot;:&quot;/usr/share/elasticsearch/data&quot;,&quot;name&quot;:&quot;es-data&quot;},{&quot;mountPath&quot;:&quot;/usr/share/elasticsearch/plugins&quot;,&quot;name&quot;:&quot;es-plugins&quot;}]}],&quot;dnsPolicy&quot;:&quot;ClusterFirst&quot;,&quot;nodeName&quot;:&quot;izwz9f3pvk4kx5hanrslqhz&quot;,&quot;restartPolicy&quot;:&quot;Always&quot;,&quot;schedulerName&quot;:&quot;default-scheduler&quot;,&quot;securityContext&quot;:{},&quot;terminationGracePeriodSeconds&quot;:30,&quot;volumes&quot;:[{&quot;configMap&quot;:{&quot;defaultMode&quot;:511,&quot;name&quot;:&quot;elasticsearch.yml&quot;,&quot;optional&quot;:false},&quot;name&quot;:&quot;xd-es&quot;},{&quot;hostPath&quot;:{&quot;path&quot;:&quot;/mydata/es/data&quot;,&quot;type&quot;:&quot;DirectoryOrCreate&quot;},&quot;name&quot;:&quot;es-data&quot;},{&quot;hostPath&quot;:{&quot;path&quot;:&quot;/mydata/es/plugins&quot;,&quot;type&quot;:&quot;DirectoryOrCreate&quot;},&quot;name&quot;:&quot;es-plugins&quot;}]}}},&quot;status&quot;:{}}</span>
  <span class="token key atrule">creationTimestamp</span><span class="token punctuation">:</span> <span class="token null important">null</span>
  <span class="token key atrule">generation</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">cattle.io/creator</span><span class="token punctuation">:</span> norman
    <span class="token key atrule">workload.user.cattle.io/workloadselector</span><span class="token punctuation">:</span> deployment<span class="token punctuation">-</span>default<span class="token punctuation">-</span>es7
  <span class="token key atrule">managedFields</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
    <span class="token key atrule">fieldsType</span><span class="token punctuation">:</span> FieldsV1
    <span class="token key atrule">fieldsV1</span><span class="token punctuation">:</span>
      <span class="token key atrule">f:metadata</span><span class="token punctuation">:</span>
        <span class="token key atrule">f:annotations</span><span class="token punctuation">:</span>
          <span class="token key atrule">.</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
          <span class="token key atrule">f:field.cattle.io/creatorId</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
          <span class="token key atrule">f:field.cattle.io/publicEndpoints</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
          <span class="token key atrule">f:kubectl.kubernetes.io/last-applied-configuration</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token key atrule">f:labels</span><span class="token punctuation">:</span>
          <span class="token key atrule">.</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
          <span class="token key atrule">f:cattle.io/creator</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
          <span class="token key atrule">f:workload.user.cattle.io/workloadselector</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token key atrule">f:spec</span><span class="token punctuation">:</span>
        <span class="token key atrule">f:progressDeadlineSeconds</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token key atrule">f:replicas</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token key atrule">f:revisionHistoryLimit</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token key atrule">f:selector</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token key atrule">f:strategy</span><span class="token punctuation">:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul>`,32),b=n("br",null,null,-1),v=n("br",null,null,-1),h=n("br",null,null,-1),f=n("br",null,null,-1),k=n("br",null,null,-1),g=n("br",null,null,-1),y=n("br",null,null,-1),P=n("br",null,null,-1),x=n("br",null,null,-1),T=n("br",null,null,-1),S=n("br",null,null,-1),E=n("br",null,null,-1),R=n("br",null,null,-1),A=n("br",null,null,-1),w=n("br",null,null,-1),N=n("br",null,null,-1),C=n("br",null,null,-1),M=n("br",null,null,-1),V=n("br",null,null,-1),O=n("br",null,null,-1),D=n("br",null,null,-1),U=n("br",null,null,-1),z=n("br",null,null,-1),L=n("br",null,null,-1),F=n("br",null,null,-1),I=n("br",null,null,-1),X=n("br",null,null,-1),j=n("br",null,null,-1),K=n("br",null,null,-1),W=n("br",null,null,-1),G=n("br",null,null,-1),H=n("br",null,null,-1),Z=n("br",null,null,-1),B=n("br",null,null,-1),J=n("br",null,null,-1),Y=n("br",null,null,-1),Q=n("br",null,null,-1),$=n("br",null,null,-1),tt=n("br",null,null,-1),nt=n("br",null,null,-1),ot=n("br",null,null,-1),et=n("br",null,null,-1),lt=n("br",null,null,-1),st=n("br",null,null,-1),ut=n("br",null,null,-1),at=n("br",null,null,-1),it=n("br",null,null,-1),rt=n("br",null,null,-1),ct=n("br",null,null,-1),dt=n("br",null,null,-1),qt=n("br",null,null,-1),pt=n("br",null,null,-1),mt=n("br",null,null,-1),_t=n("br",null,null,-1),bt=n("br",null,null,-1),vt=n("br",null,null,-1),ht=n("br",null,null,-1),ft=n("br",null,null,-1),kt=n("br",null,null,-1),gt=n("br",null,null,-1),yt=n("br",null,null,-1),Pt=n("br",null,null,-1),xt=n("br",null,null,-1),Tt=n("br",null,null,-1),St=n("br",null,null,-1),Et=n("br",null,null,-1),Rt=n("br",null,null,-1),At=n("br",null,null,-1),wt=n("br",null,null,-1),Nt=n("br",null,null,-1),Ct=n("br",null,null,-1),Mt=n("br",null,null,-1),Vt=n("br",null,null,-1),Ot=n("br",null,null,-1),Dt=n("br",null,null,-1),Ut=n("br",null,null,-1),zt=n("br",null,null,-1),Lt=n("br",null,null,-1),Ft=n("br",null,null,-1),It=n("br",null,null,-1),Xt=n("br",null,null,-1),jt=n("br",null,null,-1),Kt=n("br",null,null,-1),Wt=n("br",null,null,-1),Gt=n("br",null,null,-1),Ht=n("br",null,null,-1),Zt=n("br",null,null,-1),Bt=n("br",null,null,-1),Jt=n("br",null,null,-1),Yt=n("br",null,null,-1),Qt=n("br",null,null,-1),$t=n("br",null,null,-1),tn=n("br",null,null,-1),nn=n("br",null,null,-1),on=n("br",null,null,-1),en=n("br",null,null,-1),ln=n("br",null,null,-1),sn=n("br",null,null,-1),un=n("br",null,null,-1),an=n("br",null,null,-1),rn=n("br",null,null,-1),cn=n("br",null,null,-1),dn=n("br",null,null,-1),qn=n("br",null,null,-1),pn=n("br",null,null,-1),mn=n("br",null,null,-1),_n=n("br",null,null,-1),bn=n("br",null,null,-1),vn=n("br",null,null,-1),hn=n("br",null,null,-1),fn=n("br",null,null,-1),kn=n("br",null,null,-1),gn=n("br",null,null,-1),yn=n("br",null,null,-1),Pn=n("br",null,null,-1),xn=n("br",null,null,-1),Tn=n("br",null,null,-1),Sn=n("br",null,null,-1),En=n("br",null,null,-1),Rn=n("br",null,null,-1),An=n("br",null,null,-1),wn=n("br",null,null,-1),Nn=n("br",null,null,-1),Cn=n("br",null,null,-1),Mn=n("br",null,null,-1),Vn=n("br",null,null,-1),On=n("br",null,null,-1),Dn=n("br",null,null,-1),Un=n("br",null,null,-1),zn=n("br",null,null,-1),Ln=n("br",null,null,-1),Fn=n("br",null,null,-1),In=n("br",null,null,-1),Xn=n("br",null,null,-1),jn=n("br",null,null,-1),Kn=n("br",null,null,-1),Wn=n("br",null,null,-1),Gn=n("br",null,null,-1),Hn=n("br",null,null,-1),Zn=n("br",null,null,-1),Bn=n("br",null,null,-1),Jn=n("br",null,null,-1),Yn=n("br",null,null,-1),Qn=n("br",null,null,-1),$n=n("br",null,null,-1),to=n("br",null,null,-1),no=n("br",null,null,-1),oo=n("br",null,null,-1),eo=n("br",null,null,-1),lo=n("br",null,null,-1),so=n("br",null,null,-1),uo=n("br",null,null,-1),ao=n("br",null,null,-1),io=n("br",null,null,-1),ro={href:"http://workload.user.cattle.io/workloadselector:",target:"_blank",rel:"noopener noreferrer"},co=n("br",null,null,-1),qo=n("br",null,null,-1),po=n("br",null,null,-1),mo=n("br",null,null,-1),_o=n("br",null,null,-1),bo=n("br",null,null,-1),vo=n("br",null,null,-1),ho=n("br",null,null,-1),fo=n("br",null,null,-1),ko={href:"http://cattle.io/timestamp:",target:"_blank",rel:"noopener noreferrer"},go=n("br",null,null,-1),yo={href:"http://field.cattle.io/ports:",target:"_blank",rel:"noopener noreferrer"},Po=n("br",null,null,-1),xo={href:"http://field.cattle.io/publicEndpoints:",target:"_blank",rel:"noopener noreferrer"},To=n("br",null,null,-1),So={href:"http://workload.cattle.io/state:",target:"_blank",rel:"noopener noreferrer"},Eo=n("br",null,null,-1),Ro=n("br",null,null,-1),Ao=n("br",null,null,-1),wo={href:"http://workload.user.cattle.io/workloadselector:",target:"_blank",rel:"noopener noreferrer"},No=n("br",null,null,-1),Co=n("br",null,null,-1),Mo=n("br",null,null,-1),Vo=n("br",null,null,-1),Oo=n("br",null,null,-1),Do=n("br",null,null,-1),Uo=n("br",null,null,-1),zo=n("br",null,null,-1),Lo=n("br",null,null,-1),Fo=n("br",null,null,-1),Io=n("br",null,null,-1),Xo=n("br",null,null,-1),jo=n("br",null,null,-1),Ko=n("br",null,null,-1),Wo=n("br",null,null,-1),Go=n("br",null,null,-1),Ho=n("br",null,null,-1),Zo=n("br",null,null,-1),Bo=n("br",null,null,-1),Jo=n("br",null,null,-1),Yo=n("br",null,null,-1),Qo=n("br",null,null,-1),$o=n("br",null,null,-1),te=n("br",null,null,-1),ne=n("br",null,null,-1),oe=n("br",null,null,-1),ee=n("br",null,null,-1),le=n("br",null,null,-1),se=n("br",null,null,-1),ue=n("br",null,null,-1),ae=n("br",null,null,-1),ie=n("br",null,null,-1),re=n("br",null,null,-1),ce=n("br",null,null,-1),de=n("br",null,null,-1),qe=n("br",null,null,-1),pe=n("br",null,null,-1),me=n("br",null,null,-1),_e=n("br",null,null,-1),be=n("br",null,null,-1),ve=n("br",null,null,-1),he=n("br",null,null,-1),fe=n("br",null,null,-1),ke=n("br",null,null,-1),ge=n("br",null,null,-1),ye=n("br",null,null,-1),Pe=n("br",null,null,-1),xe=n("br",null,null,-1),Te=n("br",null,null,-1),Se=n("br",null,null,-1),Ee=n("br",null,null,-1),Re=n("br",null,null,-1),Ae=n("br",null,null,-1),we=n("br",null,null,-1),Ne=n("br",null,null,-1),Ce=n("br",null,null,-1),Me=l(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>
* 重新配置文件，默认为空，需要重新配置

  ![](./img/20220905152330.png)

* 配置主机调度

  * 并到主机下的mydata给es文件夹添加777权限

  \`\`\`
  chmod 777 -R /mydata/es
  \`\`\`

  ![image.png](./img/1649742667414-95342f65-b2fa-4a42-af68-32ebbef8a097.png)

* 配置账号密码

  * 命令行进入

  \`\`\`shell
  bin/elasticsearch-setup-passwords interactive
  \`\`\`

  * 按回车输入y，回车一直输入密码elastic即可

### Skywalking-OAP-Server

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>镜像：apache/skywalking-oap-server:8.5.0-es7<br> 端口：12800：12800 11800：11800</p><p>环境变量：<br> TZ=Asia/Shanghai<br> SW_ES_PASSWORD=elastic<br> SW_ES_USER=elastic<br> SW_STORAGE=elasticsearch7<br> SW_STORAGE_ES_CLUSTER_NODES=120.76.231.139:9200</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>
### Skywalking-UI

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>镜像：apache/skywalking-ui:8.5.0<br> 端口：8080：8000 (左边是容器端口，右边是宿主机端口)</p><p>环境变量（oap是上面定义的容器服务名称）<br> SW_OAP_ADDRESS=oap:12800<br> TZ=Asia/Shanghai</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,7);function Ve(Oe,De){const o=u("ExternalLinkIcon");return a(),i("div",null,[_,n("p",null,[t("date: 2022-02-11"),b,t(" .: {}"),v,t(" f:maxSurge: {}"),h,t(" f:maxUnavailable: {}"),f,t(" f:type: {}"),k,t(" f:template:"),g,t(" f:metadata:"),y,t(" f:annotations:"),P,t(" .: {}"),x,t(" f:workload.cattle.io/state: {}"),T,t(" f:labels:"),S,t(" .: {}"),E,t(" f:workload.user.cattle.io/workloadselector: {}"),R,t(" f:spec:"),A,t(" f:containers:"),w,t(' k:{"name":"es7"}:'),N,t(" .: {}"),C,t(" f:env:"),M,t(" .: {}"),V,t(' k:{"name":"ES_JAVA_OPTS"}:'),O,t(" .: {}"),D,t(" f:name: {}"),U,t(" f:value: {}"),z,t(' k:{"name":"discovery.type"}:'),L,t(" .: {}"),F,t(" f:name: {}"),I,t(" f:value: {}"),X,t(" f:image: {}"),j,t(" f:imagePullPolicy: {}"),K,t(" f:name: {}"),W,t(" f:ports:"),G,t(" .: {}"),H,t(' k:{"containerPort":9200,"protocol":"TCP"}:'),Z,t(" .: {}"),B,t(" f:containerPort: {}"),J,t(" f:name: {}"),Y,t(" f:protocol: {}"),Q,t(' k:{"containerPort":9300,"protocol":"TCP"}:'),$,t(" .: {}"),tt,t(" f:containerPort: {}"),nt,t(" f:name: {}"),ot,t(" f:protocol: {}"),et,t(" f:resources: {}"),lt,t(" f:securityContext:"),st,t(" .: {}"),ut,t(" f:allowPrivilegeEscalation: {}"),at,t(" f:privileged: {}"),it,t(" f:readOnlyRootFilesystem: {}"),rt,t(" f:runAsNonRoot: {}"),ct,t(" f:stdin: {}"),dt,t(" f:terminationMessagePath: {}"),qt,t(" f:terminationMessagePolicy: {}"),pt,t(" f:tty: {}"),mt,t(" f:volumeMounts:"),_t,t(" .: {}"),bt,t(' k:{"mountPath":"/usr/share/elasticsearch/config/elasticsearch.yml"}:'),vt,t(" .: {}"),ht,t(" f:mountPath: {}"),ft,t(" f:name: {}"),kt,t(" f:subPath: {}"),gt,t(' k:{"mountPath":"/usr/share/elasticsearch/data"}:'),yt,t(" .: {}"),Pt,t(" f:mountPath: {}"),xt,t(" f:name: {}"),Tt,t(' k:{"mountPath":"/usr/share/elasticsearch/plugins"}:'),St,t(" .: {}"),Et,t(" f:mountPath: {}"),Rt,t(" f:name: {}"),At,t(" f:dnsPolicy: {}"),wt,t(" f:nodeName: {}"),Nt,t(" f:restartPolicy: {}"),Ct,t(" f:schedulerName: {}"),Mt,t(" f:securityContext: {}"),Vt,t(" f:terminationGracePeriodSeconds: {}"),Ot,t(" f:volumes:"),Dt,t(" .: {}"),Ut,t(' k:{"name":"es-data"}:'),zt,t(" .: {}"),Lt,t(" f:hostPath:"),Ft,t(" .: {}"),It,t(" f:path: {}"),Xt,t(" f:type: {}"),jt,t(" f:name: {}"),Kt,t(' k:{"name":"es-plugins"}:'),Wt,t(" .: {}"),Gt,t(" f:hostPath:"),Ht,t(" .: {}"),Zt,t(" f:path: {}"),Bt,t(" f:type: {}"),Jt,t(" f:name: {}"),Yt,t(' k:{"name":"xd-es"}:'),Qt,t(" .: {}"),$t,t(" f:configMap:"),tn,t(" .: {}"),nn,t(" f:defaultMode: {}"),on,t(" f:name: {}"),en,t(" f:optional: {}"),ln,t(" f:name: {}"),sn,t(" manager: kubectl-client-side-apply"),un,t(" operation: Update"),an,t(' time: "2022-04-12T10:04:00Z"'),rn,t(" - apiVersion: apps/v1"),cn,t(" fieldsType: FieldsV1"),dn,t(" fieldsV1:"),qn,t(" f:spec:"),pn,t(" f:template:"),mn,t(" f:metadata:"),_n,t(" f:annotations:"),bn,t(" f:cattle.io/timestamp: {}"),vn,t(" f:field.cattle.io/ports: {}"),hn,t(" f:field.cattle.io/publicEndpoints: {}"),fn,t(" manager: rancher"),kn,t(" operation: Update"),gn,t(' time: "2022-04-12T10:05:12Z"'),yn,t(" - apiVersion: apps/v1"),Pn,t(" fieldsType: FieldsV1"),xn,t(" fieldsV1:"),Tn,t(" f:metadata:"),Sn,t(" f:annotations:"),En,t(" f:deployment.kubernetes.io/revision: {}"),Rn,t(" f:status:"),An,t(" f:availableReplicas: {}"),wn,t(" f:conditions:"),Nn,t(" .: {}"),Cn,t(' k:{"type":"Available"}:'),Mn,t(" .: {}"),Vn,t(" f:lastTransitionTime: {}"),On,t(" f:lastUpdateTime: {}"),Dn,t(" f:message: {}"),Un,t(" f:reason: {}"),zn,t(" f:status: {}"),Ln,t(" f:type: {}"),Fn,t(' k:{"type":"Progressing"}:'),In,t(" .: {}"),Xn,t(" f:lastTransitionTime: {}"),jn,t(" f:lastUpdateTime: {}"),Kn,t(" f:message: {}"),Wn,t(" f:reason: {}"),Gn,t(" f:status: {}"),Hn,t(" f:type: {}"),Zn,t(" f:observedGeneration: {}"),Bn,t(" f:readyReplicas: {}"),Jn,t(" f:replicas: {}"),Yn,t(" f:updatedReplicas: {}"),Qn,t(" manager: kube-controller-manager"),$n,t(" operation: Update"),to,t(' time: "2022-04-12T10:05:19Z"'),no,t(" name: es7"),oo,t(" spec:"),eo,t(" progressDeadlineSeconds: 600"),lo,t(" replicas: 1"),so,t(" revisionHistoryLimit: 10"),uo,t(" selector:"),ao,t(" matchLabels:"),io,n("a",ro,[t("workload.user.cattle.io/workloadselector:"),e(o)]),t(" deployment-default-es7"),co,t(" strategy:"),qo,t(" date: 2022-02-11"),po,t(" maxSurge: 1"),mo,t(" maxUnavailable: 0"),_o,t(" type: RollingUpdate"),bo,t(" template:"),vo,t(" metadata:"),ho,t(" annotations:"),fo,n("a",ko,[t("cattle.io/timestamp:"),e(o)]),t(' "2022-04-12T10:05:12Z"'),go,n("a",yo,[t("field.cattle.io/ports:"),e(o)]),t(` '[[{"containerPort":9200,"dnsName":"es7-nodeport","kind":"NodePort","name":"9200tcp92001","protocol":"TCP","sourcePort":9200},{"containerPort":9300,"dnsName":"es7-nodeport","kind":"NodePort","name":"9300tcp93001","protocol":"TCP","sourcePort":9300}]]'`),Po,n("a",xo,[t("field.cattle.io/publicEndpoints:"),e(o)]),t(` '[{"addresses":["172.18.123.236"],"allNodes":true,"port":9200,"protocol":"TCP","serviceId":"default:es7-nodeport"},{"addresses":["172.18.123.236"],"allNodes":true,"port":9300,"protocol":"TCP","serviceId":"default:es7-nodeport"}]'`),To,n("a",So,[t("workload.cattle.io/state:"),e(o)]),t(` '{"":"c-fh95p:m-90a323cc4bdc","aXp3ejkwcGVndTlidWR4NXRrNHJ1eno=":"c-fh95p:m-90a323cc4bdc","aXp3ejlmM3B2azRreDVoYW5yc2xxaHo=":"c-9kkcj:m-173ea115b6eb"}'`),Eo,t(" creationTimestamp: null"),Ro,t(" labels:"),Ao,n("a",wo,[t("workload.user.cattle.io/workloadselector:"),e(o)]),t(" deployment-default-es7"),No,t(" spec:"),Co,t(" containers:"),Mo,t(" - env:"),Vo,t(" - name: ES_JAVA_OPTS"),Oo,t(" value: -Xms128m -Xmx128m"),Do,t(" - name: discovery.type"),Uo,t(" value: single-node"),zo,t(" image: elasticsearch:7.6.2"),Lo,t(" imagePullPolicy: Always"),Fo,t(" name: es7"),Io,t(" ports:"),Xo,t(" - containerPort: 9200"),jo,t(" name: 9200tcp92001"),Ko,t(" protocol: TCP"),Wo,t(" - containerPort: 9300"),Go,t(" name: 9300tcp93001"),Ho,t(" protocol: TCP"),Zo,t(" resources: {}"),Bo,t(" securityContext:"),Jo,t(" allowPrivilegeEscalation: false"),Yo,t(" privileged: false"),Qo,t(" readOnlyRootFilesystem: false"),$o,t(" runAsNonRoot: false"),te,t(" stdin: true"),ne,t(" terminationMessagePath: /dev/termination-log"),oe,t(" terminationMessagePolicy: File"),ee,t(" tty: true"),le,t(" volumeMounts:"),se,t(" - mountPath: /usr/share/elasticsearch/config/elasticsearch.yml"),ue,t(" name: xd-es"),ae,t(" subPath: elasticsearch.yml"),ie,t(" - mountPath: /usr/share/elasticsearch/data"),re,t(" name: es-data"),ce,t(" - mountPath: /usr/share/elasticsearch/plugins"),de,t(" name: es-plugins"),qe,t(" dnsPolicy: ClusterFirst"),pe,t(" nodeName: izwz9f3pvk4kx5hanrslqhz"),me,t(" restartPolicy: Always"),_e,t(" schedulerName: default-scheduler"),be,t(" securityContext: {}"),ve,t(" terminationGracePeriodSeconds: 30"),he,t(" volumes:"),fe,t(" - configMap:"),ke,t(" defaultMode: 511"),ge,t(" name: elasticsearch.yml"),ye,t(" optional: false"),Pe,t(" name: xd-es"),xe,t(" - hostPath:"),Te,t(" path: /mydata/es/data"),Se,t(" type: DirectoryOrCreate"),Ee,t(" name: es-data"),Re,t(" - hostPath:"),Ae,t(" path: /mydata/es/plugins"),we,t(" type: DirectoryOrCreate"),Ne,t(" name: es-plugins"),Ce,t(" status: {}")]),Me])}const Le=s(m,[["render",Ve],["__file","01.Rancher添加集群及部署常见应用.html.vue"]]);export{Le as default};
